<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class Portal | LyxNexus</title>
    
    <!-- SEO Meta -->
    <meta name="description" content="LyxNexus is a simple yet powerful class hub designed to keep everything in one place — from announcements and assignments to topics and class discussions." />
    <meta name="keywords" content="education, coding, programming, web development, technology, online courses, learn to code" />
    <meta name="author" content="Vincent Kipngetich" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://lyxnexus.onrender.com/" />
    <link rel="icon" href="https://lyxnexus.onrender.com/uploads/favicon-1.png"/>
    
    <meta property="og:title" content="LyxNexus - Education Platform" />
    <meta property="og:description" content="LyxNexus is a simple yet powerful class hub designed to keep everything in one place — from announcements and assignments to topics and class discussions." />
    <meta property="og:image" content="https://lyxnexus.onrender.com/favicon.ico" />
    <meta property="og:url" content="https://lyxnexus.onrender.com/" />
    
    <meta name="twitter:card" content="summary" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
</head>

<style>
    :root {
        --bg-color: #0f172a;
        --text-color: #f1f5f9;
        --accent-color: #3b82f6;
        --secondary-color: #8b5cf6;
        --card-bg: rgba(30, 41, 59, 0.8);
        --border-color: rgba(100, 116, 139, 0.3);
    }
    
    body {
        font-family: 'Inter', sans-serif;
        background-color: var(--bg-color);
        color: var(--text-color);
        overflow-x: hidden;
        line-height: 1.6;
    }
    
    .gradient-text {
        background: linear-gradient(90deg, #3B82F6, #8B5CF6);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        color: transparent;
    }
    
    .glass-morph {
        background: rgba(30, 41, 59, 0.7);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(59, 130, 246, 0.2);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .glass-morph:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
    }
    
    .btn {
        background: linear-gradient(90deg, #3B82F6, #8B5CF6);
        color: white;
        border: none;
        padding: 12px 28px;
        border-radius: 10px;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        cursor: pointer;
        font-size: 0.95rem;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        min-height: 48px;
    }
    
    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
    }
    
    .btn-sm {
        padding: 10px 20px;
        font-size: 0.9rem;
        min-height: 44px;
    }
    
    .btn-outline {
        background: transparent;
        border: 2px solid #3B82F6;
        color: #3B82F6;
        box-shadow: none;
    }
    
    .btn-outline:hover {
        background: #3B82F6;
        color: white;
        box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
    }
    
    .floating {
        animation: floating 3s ease-in-out infinite;
    }
    
    @keyframes floating {
        0% { transform: translate(0, 0px); }
        50% { transform: translate(0, 12px); }
        100% { transform: translate(0, -0px); }
    }
    
    .pulse {
        animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.03); }
        100% { transform: scale(1); }
    }
    
    .logo-container {
        background: linear-gradient(135deg, #3B82F6, #8B5CF6);
        border-radius: 12px;
        padding: 10px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }
    
    .feature-icon {
        width: 64px;
        height: 64px;
        background: rgba(59, 130, 246, 0.1);
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 15px;
        color: #3B82F6;
        font-size: 26px;
    }
    
    .announcement-card {
        background: var(--card-bg);
        border-radius: 16px;
        padding: 24px;
        margin-bottom: 20px;
        border-left: 4px solid #3B82F6;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        border: 1px solid var(--border-color);
    }
    
    .announcement-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
    }
    
    .assignment-card {
        background: var(--card-bg);
        border-radius: 16px;
        padding: 24px;
        margin-bottom: 20px;
        border-left: 4px solid #8B5CF6;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        border: 1px solid var(--border-color);
    }
    
    .assignment-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
    }
    
    .timetable-day {
        background: var(--card-bg);
        border-radius: 16px;
        padding: 24px;
        margin-bottom: 20px;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        border: 1px solid var(--border-color);
    }
    
    .timetable-day:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
    }
    
    .timetable-slot {
        display: flex;
        justify-content: space-between;
        padding: 12px 0;
        border-bottom: 1px solid rgba(100, 116, 139, 0.3);
    }
    
    .timetable-slot:last-child {
        border-bottom: none;
    }
    
    .loading {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
    }
    
    .spinner {
        border: 4px solid rgba(59, 130, 246, 0.2);
        border-radius: 50%;
        border-top: 4px solid #3B82F6;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    .nav-link {
        color: #cbd5e1;
        font-weight: 500;
        padding: 10px 18px;
        border-radius: 10px;
        transition: all 0.3s ease;
        position: relative;
    }
    
    .nav-link:hover {
        color: #3B82F6;
        background: rgba(59, 130, 246, 0.1);
    }
    
    .nav-link.active {
        color: #3B82F6;
        background: rgba(59, 130, 246, 0.1);
    }
    
    .nav-link.active::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 18px;
        right: 18px;
        height: 2px;
        background: #3B82F6;
        border-radius: 2px;
    }
    
    .modern-card {
        background: var(--card-bg);
        border-radius: 16px;
        padding: 24px;
        transition: all 0.3s ease;
        border: 1px solid var(--border-color);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    }
    
    .modern-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 35px rgba(0, 0, 0, 0.25);
        border-color: rgba(59, 130, 246, 0.3);
    }
    
    /* Toast System Styles */
    .toast-container {
        position: fixed;
        top: 100px;
        right: 20px;
        z-index: 1000;
        display: flex;
        flex-direction: column;
        gap: 12px;
        max-width: 400px;
        pointer-events: none;
    }
    
    .toast {
        background: rgba(30, 41, 59, 0.95);
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        border: 1px solid rgba(59, 130, 246, 0.3);
        border-radius: 12px;
        padding: 16px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        display: flex;
        align-items: flex-start;
        gap: 12px;
        transform: translateX(400px);
        opacity: 0;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        pointer-events: all;
        max-width: 100%;
        overflow: hidden;
    }
    
    .toast.show {
        transform: translateX(0);
        opacity: 1;
    }
    
    .toast.hide {
        transform: translateX(400px);
        opacity: 0;
    }
    
    .toast-icon {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        margin-top: 2px;
    }
    
    .toast-success .toast-icon {
        background: rgba(34, 197, 94, 0.2);
        color: #22c55e;
    }
    
    .toast-error .toast-icon {
        background: rgba(239, 68, 68, 0.2);
        color: #ef4444;
    }
    
    .toast-warning .toast-icon {
        background: rgba(245, 158, 11, 0.2);
        color: #f59e0b;
    }
    
    .toast-info .toast-icon {
        background: rgba(59, 130, 246, 0.2);
        color: #3b82f6;
    }
    
    .toast-content {
        flex: 1;
        min-width: 0;
    }
    
    .toast-title {
        font-weight: 600;
        margin-bottom: 4px;
        font-size: 0.95rem;
    }
    
    .toast-message {
        color: #cbd5e1;
        font-size: 0.875rem;
        line-height: 1.4;
        word-wrap: break-word;
    }
    
    .toast-close {
        background: none;
        border: none;
        color: #94a3b8;
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        transition: all 0.2s ease;
    }
    
    .toast-close:hover {
        color: #f1f5f9;
        background: rgba(255, 255, 255, 0.1);
    }
    
    .toast-progress {
        position: absolute;
        bottom: 0;
        left: 0;
        height: 3px;
        background: linear-gradient(90deg, #3B82F6, #8B5CF6);
        border-radius: 0 0 0 12px;
        width: 100%;
        transform-origin: left;
        animation: toastProgress 5s linear forwards;
    }
    
    @keyframes toastProgress {
        from { transform: scaleX(1); }
        to { transform: scaleX(0); }
    }
    
    .announcement-skeleton {
        background: var(--card-bg);
        border-radius: 16px;
        padding: 20px;
        margin-bottom: 20px;
        border-left: 4px solid #3B82F6;
        animation: pulse 2s infinite;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    }
    
    .skeleton-title {
        height: 24px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        margin-bottom: 12px;
        width: 70%;
    }
    
    .skeleton-text {
        height: 16px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        margin-bottom: 8px;
    }
    
    .skeleton-text.short {
        width: 40%;
    }
    
    .section-divider {
        height: 1px;
        background: linear-gradient(90deg, transparent, rgba(100, 116, 139, 0.3), transparent);
        margin: 40px 0;
    }
    
    .card-header {
        display: flex;
        align-items: center;
        margin-bottom: 16px;
    }
    
    .card-header-icon {
        width: 40px;
        height: 40px;
        border-radius: 10px;
        background: rgba(59, 130, 246, 0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #3B82F6;
        margin-right: 12px;
    }
    
    @media (max-width: 768px) {
        nav .max-w-6xl.mx-auto.px-4.py-4 {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
        }
        
        .logo-container {
            padding: 8px;
        }
        
        .logo-container svg {
            width: 24px;
            height: 24px;
        }
        
        .text-2xl.font-bold {
            font-size: 1.25rem;
        }
        
        .flex.space-x-4 {
            flex-direction: column;
            gap: 8px;
            width: 100%;
        }
        
        .btn {
            width: 100%;
            text-align: center;
        }
        
        header.py-16.md\:py-24 {
            padding-top: 3rem;
            padding-bottom: 3rem;
        }
        
        .text-4xl.md\:text-6xl {
            font-size: 2rem;
        }
        
        .text-xl {
            font-size: 1rem;
        }
        
        .flex.flex-col.sm\:flex-row .btn {
            width: 100%;
            margin-bottom: 8px;
        }
        
        main .space-y-16 {
            gap: 2rem;
        }
        
        .text-3xl.md\:text-4xl {
            font-size: 1.75rem;
        }
        
        .hidden.md\:flex {
            display: none !important;
        }
        
        .toast-container {
            top: 80px;
            right: 10px;
            left: 10px;
            max-width: none;
        }
        
        .toast {
            max-width: 100%;
        }
        
        .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: flex-start;
            align-items: center;
            overflow-x: auto;    
            overflow-y: hidden;
            white-space: nowrap;      
            padding: 12px;
            z-index: 100;
            border-top: 1px solid rgba(100, 116, 139, 0.3);
            scroll-behavior: smooth;   
            -webkit-overflow-scrolling: touch; 
        }

        
        .mobile-nav::-webkit-scrollbar {
            display: none;
        }
        .mobile-nav {
            -ms-overflow-style: none; 
            scrollbar-width: none;    
        }

        .mobile-nav-btn {
            display: inline-flex;        
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 8px 12px;
            border-radius: 12px;
            color: #94a3b8;
            font-size: 12px;
            transition: all 0.3s ease;
            flex: 0 0 auto;               
            width: 70px;                  
            margin-right: 10px;
            text-align: center;
        }

        .mobile-nav-btn.active {
            color: #3B82F6;
            background: rgba(59, 130, 246, 0.1);
        }

        .mobile-nav-btn i {
            font-size: 18px;
            margin-bottom: 4px;
        }

        .content-container {
            padding-bottom: 90px;
        }
        
        .card-header {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .card-header-icon {
            margin-bottom: 10px;
            margin-right: 0;
        }
    }

    @media (max-width: 480px) {
        .btn {
            padding: 10px 20px;
            font-size: 0.85rem;
        }
        
        .text-4xl.md\:text-6xl {
            font-size: 1.75rem;
        }
        
        .feature-icon {
            width: 50px;
            height: 50px;
            font-size: 22px;
        }
        
        .modern-card {
            padding: 20px;
        }
    }
    
    html {
        scroll-behavior: smooth;
    }
    
    .btn:focus, a:focus {
        outline: 2px solid #3B82F6;
        outline-offset: 2px;
    }
    
    .section-title {
        position: relative;
        display: inline-block;
        margin-bottom: 3rem;
        font-weight: 700;
    }
    
    .section-title::after {
        content: '';
        position: absolute;
        bottom: -12px;
        left: 0;
        width: 60px;
        height: 4px;
        background: linear-gradient(90deg, #3B82F6, #8B5CF6);
        border-radius: 2px;
    }
    
    .status-badge {
        padding: 6px 14px;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 600;
    }
    
    .status-due-soon {
        background: rgba(59, 130, 246, 0.2);
        color: #3B82F6;
    }
    
    .status-urgent {
        background: rgba(239, 68, 68, 0.2);
        color: #ef4444;
    }
    
    .status-completed {
        background: rgba(34, 197, 94, 0.2);
        color: #22c55e;
    }
    
    .accent-line {
        height: 4px;
        width: 40px;
        background: linear-gradient(90deg, #3B82F6, #8B5CF6);
        border-radius: 2px;
        margin: 0 auto 20px;
    }
    
    .stat-card {
        background: var(--card-bg);
        border-radius: 16px;
        padding: 24px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        border: 1px solid var(--border-color);
        transition: all 0.3s ease;
    }
    
    .stat-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
    }
    
    .stat-number {
        font-size: 2.5rem;
        font-weight: 700;
        background: linear-gradient(90deg, #3B82F6, #8B5CF6);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        color: transparent;
        margin-bottom: 8px;
    }
    
    .stat-label {
        color: #cbd5e1;
        font-size: 0.9rem;
        font-weight: 500;
    }
    
    .quick-action {
        background: var(--card-bg);
        border-radius: 16px;
        padding: 20px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        border: 1px solid var(--border-color);
        transition: all 0.3s ease;
        cursor: pointer;
    }
    
    .quick-action:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
        border-color: rgba(59, 130, 246, 0.3);
    }
    
    .quick-action-icon {
        width: 50px;
        height: 50px;
        border-radius: 12px;
        background: rgba(59, 130, 246, 0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #3B82F6;
        font-size: 22px;
        margin: 0 auto 12px;
    }
</style>
<body class="bg-[url(/uploads/OIP3.jpg)] bg-fixed bg-center bg-cover">
    
    <div id="toast-container" class="toast-container"></div>
    
    <nav class="glass-morph sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <div class="logo-container">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                        <polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline>
                        <polyline points="7.5 19.79 7.5 14.6 3 12"></polyline>
                        <polyline points="21 12 16.5 14.6 16.5 19.79"></polyline>
                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                        <line x1="12" y1="22.08" x2="12" y2="12"></line>
                    </svg>
                </div>
                <span class="text-2xl font-bold gradient-text">LyxNexus</span>
            </div>
            <div class="hidden md:flex space-x-1">
                <a href="#" class="nav-link active">Home</a>
                <a href="#announcements" class="nav-link">Announcements</a>
                <a href="#assignments" class="nav-link">Assignments</a>
                <a href="#topics" class="nav-link">Units</a>
                <a href="#timetable" class="nav-link">Timetable</a>
                <a href="/terms" class="nav-link">Terms</a>
            </div>
            <div class="flex space-x-3">
                <button class="btn btn-sm pulse" onclick="window.location.href='/login'">
                    <i class="fas fa-sign-in-alt"></i>
                    <span class="hidden sm:inline">Login Portal</span>
                </button>
            </div>
        </div>
    </nav>

    <header class="py-16 md:py-20 content-container">
        <div class="max-w-6xl mx-auto px-4 flex flex-col md:flex-row items-center">
            <div class="md:w-1/2 mb-10 md:mb-0">
                <div class="accent-line"></div>
                <h1 class="text-4xl md:text-5xl font-bold text-slate-100 mb-6 tracking-tight">Welcome to <span class="gradient-text font-bold">LyxNexus</span></h1>
                <p class="text-lg text-slate-300 mb-8" id="description"></p>
                <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                    <button class="btn pulse" onclick="window.location.href='#announcements'">
                        <i class="fas fa-bullhorn"></i>
                        View Announcements
                    </button>
                    <button class="btn btn-outline" onclick="window.location.href='#assignments'">
                        <i class="fas fa-tasks"></i>
                        Check Assignments
                    </button>
                </div>
                
                <!-- Quick Stats -->
                <div class="grid grid-cols-3 gap-4 mt-12">
                    <div class="stat-card">
                        <div class="stat-number" id="announcements-count">0</div>
                        <div class="stat-label break-all overflow-hidden">Announcements</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="assignments-count">0</div>
                        <div class="stat-label break-all overflow-hidden">Assignments</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="topics-count">0</div>
                        <div class="stat-label break-all overflow-hidden">Course Units</div>
                    </div>
                </div>
            </div>
            <div class="md:w-1/2 flex justify-center">
                <div class="floating relative">
                    <div class="glass-morph p-8 rounded-3xl w-80 h-80 flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 24 24" fill="none" stroke="url(#gradient)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <defs>
                                <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" stop-color="#3B82F6" />
                                    <stop offset="100%" stop-color="#8B5CF6" />
                                </linearGradient>
                            </defs>
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <polyline points="10 9 9 9 8 9"></polyline>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 py-12 space-y-16 content-container">
        <!-- Quick Actions -->
        <section id="quick-actions">
            <h2 class="text-3xl md:text-4xl font-bold text-center section-title">Quick Access</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="quick-action" onclick="window.location.href='#announcements'">
                    <div class="quick-action-icon">
                        <i class="fas fa-bullhorn"></i>
                    </div>
                    <h3 class="font-semibold text-slate-100 break-all overflow-hidden">Announcements</h3>
                </div>
                <div class="quick-action" onclick="window.location.href='#assignments'">
                    <div class="quick-action-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <h3 class="font-semibold text-slate-100 break-all overflow-hidden">Assignments</h3>
                </div>
                <div class="quick-action" onclick="window.location.href='#topics'">
                    <div class="quick-action-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <h3 class="font-semibold text-slate-100 break-all overflow-hidden">Course Units</h3>
                </div>
                <div class="quick-action" onclick="window.location.href='#timetable'">
                    <div class="quick-action-icon">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <h3 class="font-semibold text-slate-100 break-all overflow-hidden">Timetable</h3>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>
        
        <!-- Announcements Section -->
        <section id="announcements">
            <div class="card-header">
                <div class="card-header-icon">
                    <i class="fas fa-bullhorn"></i>
                </div>
                <div>
                    <h2 class="text-3xl md:text-4xl font-bold section-title">Latest Announcements</h2>
                    <p class="text-slate-300">Stay updated with the latest class information</p>
                </div>
            </div>
            <div id="announcements-container" class="space-y-6">
                <!-- Skeleton loader -->
                <div class="announcement-skeleton">
                    <div class="skeleton-title"></div>
                    <div class="skeleton-text"></div>
                    <div class="skeleton-text"></div>
                    <div class="skeleton-text short"></div>
                </div>
                <div class="announcement-skeleton">
                    <div class="skeleton-title"></div>
                    <div class="skeleton-text"></div>
                    <div class="skeleton-text short"></div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- Assignments Section -->
        <section id="assignments">
            <div class="card-header">
                <div class="card-header-icon">
                    <i class="fas fa-tasks"></i>
                </div>
                <div>
                    <h2 class="text-3xl md:text-4xl font-bold section-title">Current Assignments</h2>
                    <p class="text-slate-300">Track your progress and deadlines</p>
                </div>
            </div>
            <div id="assignments-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="loading">
                    <div class="spinner"></div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- Topics Section -->
        <section id="topics">
            <div class="card-header">
                <div class="card-header-icon">
                    <i class="fas fa-book"></i>
                </div>
                <div>
                    <h2 class="text-3xl md:text-4xl font-bold section-title">Course Topics</h2>
                    <p class="text-slate-300">Explore learning materials and resources</p>
                </div>
            </div>
            <div id="topics-container" class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="loading">
                    <div class="spinner"></div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- Timetable Section -->
        <section id="timetable">
            <div class="card-header">
                <div class="card-header-icon">
                    <i class="fas fa-calendar-alt"></i>
                </div>
                <div>
                    <h2 class="text-3xl md:text-4xl font-bold section-title">Class Timetable</h2>
                    <p class="text-slate-300">Plan your study schedule</p>
                </div>
            </div>
            <div id="timetable-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="loading">
                    <div class="spinner"></div>
                </div>
            </div>
        </section>
    </main>

    <footer class="mt-20 py-10 border-t border-slate-800">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-6 md:mb-0">
                    <div class="flex items-center space-x-3">
                        <div class="logo-container">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                                <polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline>
                                <polyline points="7.5 19.79 7.5 14.6 3 12"></polyline>
                                <polyline points="21 12 16.5 14.6 16.5 19.79"></polyline>
                                <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                                <line x1="12" y1="22.08" x2="12" y2="12"></line>
                            </svg>
                        </div>
                        <span class="text-xl font-bold gradient-text">LyxNexus</span>
                    </div>
                    <p class="mt-2 text-slate-400">Your learning management system for modern education.</p>
                </div>
                <div class="flex space-x-6">
                    <a href="#" class="text-slate-400 hover:text-blue-400 transition-colors text-lg"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="text-slate-400 hover:text-blue-400 transition-colors text-lg"><i class="fab fa-github"></i></a>
                    <a href="#" class="text-slate-400 hover:text-blue-400 transition-colors text-lg"><i class="fab fa-linkedin"></i></a>
                    <a href="#" class="text-slate-400 hover:text-blue-400 transition-colors text-lg"><i class="fab fa-discord"></i></a>
                </div>
            </div>
            <div class="mt-8 pt-8 border-t border-slate-800 text-center text-slate-500 text-sm">
                <p>© {{ year }} LyxNexus. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Mobile Navigation -->
    <div class="mobile-nav md:hidden">
        <a href="#" class="mobile-nav-btn active">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a href="#announcements" class="mobile-nav-btn">
            <i class="fas fa-bullhorn"></i>
            <span>Announce</span>
        </a>
        <a href="#assignments" class="mobile-nav-btn">
            <i class="fas fa-tasks"></i>
            <span>Assign</span>
        </a>
        <a href="#topics" class="mobile-nav-btn">
            <i class="fas fa-book"></i>
            <span>Units</span>
        </a>
        <a href="#timetable" class="mobile-nav-btn">
            <i class="fas fa-calendar"></i>
            <span>Timetable</span>
        </a>
        <a href="/terms" class="mobile-nav-btn">
            <i class="fas fa-file-contract"></i>
            <span>Terms</span>
        </a>
    </div>

    <script>
        new Typed('#description', {
            strings: [
                'Your central hub for class announcements, assignments, timetables and course materials.',
                'Your one-stop hub for announcements, assignments, schedules, and learning resources.',
                'Stay organized with all your class updates, assignments, and materials in one place.',
                'The central platform for course updates, study materials, timetables, and assignments.'
            ],
            typeSpeed: 20,        // typing speed
            backSpeed: 60,        // backspacing speed
            startDelay: 500,      // delay before typing starts
            backDelay: 3000,      // pause before deleting (so users can read)
            smartBackspace: true, // only backspace what’s necessary
            loop: true            // keep looping
        });
        
        class ToastSystem {
            constructor() {
                this.container = document.getElementById('toast-container');
                this.toasts = [];
                this.nextId = 0;
            }
            
            show(message, title = 'Notification', type = 'info', duration = 5000) {
                const id = this.nextId++;
                const toast = document.createElement('div');
                toast.className = `toast toast-${type}`;
                toast.id = `toast-${id}`;
                
                const icons = {
                    success: 'fas fa-check-circle',
                    error: 'fas fa-exclamation-circle',
                    warning: 'fas fa-exclamation-triangle',
                    info: 'fas fa-info-circle'
                };
                
                toast.innerHTML = `
                    <div class="toast-icon">
                        <i class="${icons[type]}"></i>
                    </div>
                    <div class="toast-content">
                        <div class="toast-title">${title}</div>
                        <div class="toast-message">${message}</div>
                    </div>
                    <button class="toast-close" onclick="toastSystem.hide(${id})">
                        <i class="fas fa-times"></i>
                    </button>
                    <div class="toast-progress"></div>
                `;
                
                this.container.appendChild(toast);
                
                setTimeout(() => {
                    toast.classList.add('show');
                }, 10);
                
                if (duration > 0) {
                    setTimeout(() => {
                        this.hide(id);
                    }, duration);
                }
                
                this.toasts.push({ id, element: toast });
                return id;
            }
            
            hide(id) {
                const toast = document.getElementById(`toast-${id}`);
                if (toast) {
                    toast.classList.remove('show');
                    toast.classList.add('hide');
                    
                    setTimeout(() => {
                        if (toast.parentNode) {
                            toast.parentNode.removeChild(toast);
                        }
                    }, 400);
                }
                
                this.toasts = this.toasts.filter(t => t.id !== id);
            }
            
            success(message, title = 'Success') {
                return this.show(message, title, 'success');
            }
            
            error(message, title = 'Error') {
                return this.show(message, title, 'error');
            }
            
            warning(message, title = 'Warning') {
                return this.show(message, title, 'warning');
            }
            
            info(message, title = 'Information') {
                return this.show(message, title, 'info');
            }
        }
        
        const toastSystem = new ToastSystem();
        
        const API_BASE = '/api';
        const ENDPOINTS = {
            ANNOUNCEMENTS: `${API_BASE}/announcements`,
            ASSIGNMENTS: `${API_BASE}/assignments`,
            TIMETABLE: `${API_BASE}/timetable`,
            TOPICS: `${API_BASE}/topics`
        };

        function formatDate(dateString) {
            const date = new Date(dateString);
        
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric', 
                hour: '2-digit', 
                minute: '2-digit', 
                hour12: true
            };
        
            return date.toLocaleString(undefined, options);
        }
        
        async function fetchData(endpoint) {
            try {
                const response = await fetch(endpoint);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return await response.json();
            } catch (error) {
                console.error(`Error fetching data from ${endpoint}:`, error);
                return [];
            }
        }

        // Load announcements with lazy load
        async function loadAnnouncements() {
          const container = document.getElementById('announcements-container');
          
          // Show skeleton while loading
          container.innerHTML = `
            <div class="announcement-skeleton">
                <div class="skeleton-title"></div>
                <div class="skeleton-text"></div>
                <div class="skeleton-text"></div>
                <div class="skeleton-text short"></div>
            </div>
            <div class="announcement-skeleton">
                <div class="skeleton-title"></div>
                <div class="skeleton-text"></div>
                <div class="skeleton-text short"></div>
            </div>
          `;
          
          try {
            const announcements = await fetchData(ENDPOINTS.ANNOUNCEMENTS) || [];
        
            if (announcements.length === 0) {
              container.innerHTML = '<p class="text-center text-slate-400 py-8">No announcements available.</p>';
              document.getElementById('announcements-count').textContent = '0';
              return;
            }
            
            document.getElementById('announcements-count').textContent = announcements.length;
        
            container.innerHTML = announcements.map(announcement => `
              <div class="announcement-card b-l-4 b-blue-500">
                <div class="flex justify-between items-start mb-3">
                  <h3 class="text-xl text-slate-100 uppercase underline underline-offset-4 decoration-sky-500 decoration-double font-bold">
                    ${announcement.title}
                  </h3>
                  <span class="text-blue-400 text-sm">Posted: ${formatDate(announcement.created_at)}</span>
                </div>
                <p class="mb-3 break-all hyphens-auto text-slate-300">${announcement.content}</p>
                <div class="flex justify-between items-center">
                  <span class="text-slate-400 text-sm">By: ${announcement.author?.username || 'Unknown'}</span>
                  <button class="view-details-btn text-blue-400 hover:text-blue-300 text-sm flex items-center gap-1">
                    View Details <i class="fas fa-arrow-right text-xs"></i>
                  </button>
                </div>
              </div>
            `).join('');
        
            container.addEventListener('click', (e) => {
              const btn = e.target.closest('.view-details-btn');
              if (btn) {
                window.location.href = '/login';
              }
            });
          } catch (error) {
            container.innerHTML = '<p class="text-center text-slate-400 py-8">Failed to load announcements.</p>';
            toastSystem.error('Failed to load announcements. Please try again.', 'Connection Error');
          }
        }

        // Load assignments
        async function loadAssignments() {
            const container = document.getElementById('assignments-container');
            const assignments = await fetchData(ENDPOINTS.ASSIGNMENTS);
            
            if (assignments.length === 0) {
                container.innerHTML = '<p class="text-center text-slate-400 py-8">No assignments available.</p>';
                document.getElementById('assignments-count').textContent = '0';
                return;
            }
            
            document.getElementById('assignments-count').textContent = assignments.length;
            
            container.innerHTML = assignments.map(assignment => {
                const dueDate = new Date(assignment.due_date);
                const now = new Date();
                const daysUntilDue = Math.ceil((dueDate - now) / (1000 * 60 * 60 * 24));
                
                let statusClass = 'status-due-soon';
                let statusText = 'Due Soon';
                
                if (daysUntilDue < 0) {
                    statusClass = 'status-urgent';
                    statusText = 'Overdue';
                } else if (daysUntilDue <= 1) {
                    statusClass = 'status-urgent';
                    statusText = 'Due Tomorrow';
                } else if (daysUntilDue <= 3) {
                    statusClass = 'status-due-soon';
                    statusText = 'Due Soon';
                } else {
                    statusClass = 'status-completed';
                    statusText = 'Upcoming';
                }
                
                return `
                <div class="assignment-card">
                    <div class="flex justify-between items-start mb-3">
                        <h3 class="text-xl font-bold text-slate-100">${assignment.title}</h3>
                        <span class="status-badge ${statusClass}">${statusText}: ${formatDate(assignment.due_date)}</span>
                    </div>
                    <p class="mb-4 text-slate-300 break-all hyphens-auto">${assignment.description}</p>
                    <div class="flex justify-between items-center">
                        <span class="text-slate-400 text-sm">Topic: ${assignment.topic?.name || 'General'}</span>
                        <button onclick="window.location.href='/assignment/${assignment.id}'" class="btn btn-sm">
                            <i class="fas fa-paper-plane"></i>
                            View File
                        </button>
                    </div>
                </div>
                `;
            }).join('');
        }

        // Load topics
        async function loadTopics() {
            const container = document.getElementById('topics-container');
            const topics = await fetchData(ENDPOINTS.TOPICS);
            
            if (topics.length === 0) {
                container.innerHTML = '<p class="text-center text-slate-400 py-8">No topics available.</p>';
                document.getElementById('topics-count').textContent = '0';
                return;
            }
            
            document.getElementById('topics-count').textContent = topics.length;
            
            container.innerHTML = topics.map(topic => `
                <div class="modern-card text-center">
                    <div class="feature-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-4 text-slate-100">${topic.name}</h3>
                    <p class="text-slate-300 mb-4 break-all hyphens-auto">${topic.description}</p>
                    <button class="btn btn-sm w-full">
                        <i class="fas fa-folder-open"></i>
                        View Materials
                    </button>
                </div>
            `).join('');
        }

        // Load timetable
        async function loadTimetable() {
            const container = document.getElementById('timetable-container');
            const timetable = await fetchData(`${ENDPOINTS.TIMETABLE}/grouped`);
            
            if (timetable.length === 0) {
                container.innerHTML = '<p class="text-center text-slate-400 py-8">No timetable available.</p>';
                return;
            }
            
            container.innerHTML = timetable.map(daySchedule => `
                <div class="timetable-day">
                    <h3 class="text-xl font-bold mb-4 border-b border-slate-700 pb-2 text-slate-100">${daySchedule.day}</h3>
                    ${daySchedule.slots.map(slot => `
                        <div class="timetable-slot">
                            <div class="flex-1">
                                <div class="font-semibold text-slate-100">${slot.subject}</div>
                                <div class="text-sm text-slate-400">${slot.teacher || 'TBA'}</div>
                            </div>
                            <div class="text-right">
                                <div class="text-blue-400">${slot.time}</div>
                                <div class="text-sm text-slate-400">${slot.room || 'TBA'}</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `).join('');
        }

        function setupMobileNav() {
            const mobileNavBtns = document.querySelectorAll('.mobile-nav-btn');
            
            mobileNavBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    mobileNavBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        }        
        
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', () => {
            navigator.serviceWorker
              .register('/service-worker.js')
              .then(reg => console.log('✅ SW registered:', reg.scope))
              .catch(err => console.error('❌ SW registration failed:', err));
          });
        }

        // Refresh or redirect on connection changes
        window.addEventListener('online', () => location.reload());
        window.addEventListener('offline', () => {
          if (location.pathname !== '/offline.html') {
            location.href = '/offline.html';
          }
        });

        const flashedMessages = {{ get_flashed_messages(with_categories=true) | tojson }};
        
        document.addEventListener('DOMContentLoaded', function() {
            if (flashedMessages && flashedMessages.length > 0) {
                flashedMessages.forEach(([category, message]) => {
                    const type = ['success', 'error', 'warning', 'info'].includes(category) ? category : 'info';
                    toastSystem[type](message, category);
                });
            }
        
            loadAnnouncements();
            loadAssignments();
            loadTopics();
            loadTimetable();
            setupMobileNav();
        
            setTimeout(() => {
                toastSystem.success('Welcome to LyxNexus! All content is loading now.', 'Welcome');
            }, 1500);
        });

    </script>
</body>
</html>